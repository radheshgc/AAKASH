<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>timer_settime(2) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="timer_settime(2) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index2.html" shape="rect">Section 2</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="timer-settime.2" name="timer-settime.2" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>timer_settime, timer_gettime — arm/disarm and fetch
      state of POSIX per-process timer</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;time.h&gt;
</pre>

        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>timer_settime</strong>(</code></td>

            <td rowspan="1" colspan="1">timer_t <var class="pdparam">timerid</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">flags</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">const struct itimerspec *<var class="pdparam">new_value</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">struct itimerspec * <var class="pdparam">old_value</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>timer_gettime</strong>(</code></td>

            <td rowspan="1" colspan="1">timer_t <var class="pdparam">timerid</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">struct itimerspec *<var class="pdparam">curr_value</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <div class="featuretests">
                <table style="border-collapse: collapse;">
                  <colgroup span="1">
                    <col span="1" />
                  </colgroup>

                  <thead>
                    <tr>
                      <th style="" rowspan="1" colspan="1">Feature Test Macro Requirements
                      for glibc (see <a class="link" href="../htmlman7/feature_test_macros.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">feature_test_macros</span>(7)</span></a>):</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="function">timer_settime</code>(),
                      <code class="function">timer_gettime</code>():</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_POSIX_C_SOURCE</code>
                      &gt;= 199309L</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
        </table>
      </div>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <p>Link with <code class="option">−lrt</code>.</p>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div class="refsect1">
      <a id="timer-settime-2_sect1" name="timer-settime-2_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p><code class="function">timer_settime</code>() arms or
      disarms the timer identified by <em class="parameter"><code>timerid</code></em>. The <em class="parameter"><code>new_value</code></em> argument is pointer
      to an <span class="structname">itimerspec</span> structure
      that specifies the new initial value and the new interval for
      the timer. The <span class="structname">itimerspec</span>
      structure is defined as follows:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="structdef">
            <table style="border-collapse: collapse;">
              <colgroup span="1">
                <col class="c1" span="1" />
                <col class="c2" span="1" />
                <col class="c3" span="1" />
                <col class="c4" span="1" />
                <col class="c5" span="1" />
              </colgroup>

              <tbody>
                <tr>
                  <td class="structdefhdr" style="" align="left" rowspan="1" colspan="1">
                  struct</td>

                  <td class="structdefhdr" style="" colspan="4" align="left" rowspan="1"><span class="structname">timespec</span> {</td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">time_t</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>tv_sec</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* Seconds */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">long</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>tv_nsec</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* Nanoseconds */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td class="structdefftr" style="" colspan="5" align="left" rowspan="1">};</td>
                </tr>

                <tr>
                  <td class="structsep" style="" colspan="5" align="left" rowspan="1"></td>
                </tr>

                <tr>
                  <td class="structdefhdr2" style="" align="left" rowspan="1" colspan="1">
                  struct</td>

                  <td class="structdefhdr2" style="" colspan="4" align="left" rowspan="1"><span class="structname">itimerspec</span> {</td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">struct timespec</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>it_interval</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      /* Timer interval */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td style="" rowspan="1" colspan="1"> </td>

                  <td style="" align="left" rowspan="1" colspan="1"><span class="type">struct timespec</span></td>

                  <td class="norightpad" style="" align="right" rowspan="1" colspan="1">
                   </td>

                  <td style="" align="left" rowspan="1" colspan="1"><em class="structfield"><code>it_value</code></em>;</td>

                  <td style="" align="left" rowspan="1" colspan="1">
                    <div class="literallayout">
                      
                      /* Initial expiration */
                    </div>
                  </td>
                </tr>

                <tr>
                  <td class="structdefftr" style="" colspan="5" align="left" rowspan="1">};</td>
                </tr>
              </tbody>
            </table>
          </div>
        </blockquote>
      </div>

      <p>Each of the substructures of the <span class="structname">itimerspec</span> structure is a <em class="replaceable"><code>timespec</code></em> structure that
      allows a time value to be specified in seconds and
      nanoseconds. These time values are measured according to the
      clock that was specified when the timer was created by
      <a class="link" href="../htmlman2/timer_create.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">timer_create</span>(2)</span></a></p>

      <p>If <em class="replaceable"><code>new_value-&gt;it_value</code></em>
      specifies a nonzero value (i.e., either subfield is nonzero),
      then <code class="function">timer_settime</code>() arms
      (starts) the timer, setting it to initially expire at the
      given time. (If the timer was already armed, then the
      previous settings are overwritten.) If <em class="replaceable"><code>new_value-&gt;it_value</code></em>
      specifies a zero value (i.e., both subfields are zero), then
      the timer is disarmed.</p>

      <p>The <em class="replaceable"><code>new_value-&gt;it_interval</code></em>
      field specifies the period of the timer, in seconds and
      nanoseconds. If this field is nonzero, then each time that an
      armed timer expires, the timer is reloaded from the value
      specified in <em class="replaceable"><code>new_value-&gt;it_interval</code></em>. If
      <em class="replaceable"><code>new_value-&gt;it_interval</code></em>
      specifies a zero value then the timer expires just once, at
      the time specified by <em class="parameter"><code>it_value</code></em>.</p>

      <p>By default, the initial expiration time specified in
      <em class="replaceable"><code>new_value-&gt;it_value</code></em> is
      interpreted relative to the current time on the timer's clock
      at the time of the call. This can be modified by specifying
      <code class="constant">TIMER_ABSTIME</code> in <em class="parameter"><code>flags</code></em>, in which case <em class="replaceable"><code>new_value-&gt;it_value</code></em> is
      interpreted as an absolute value as measured on the timer's
      clock; that is, the timer will expire when the clock value
      reaches the value specified by <em class="replaceable"><code>new_value-&gt;it_value</code></em>. If
      the specified absolute time has already passed, then the
      timer expires immediately, and the overrun count (see
      <a class="link" href="../htmlman2/timer_getoverrun.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">timer_getoverrun</span>(2)</span></a>) will
      be set correctly.</p>

      <p>If the value of the <code class="constant">CLOCK_REALTIME</code> clock is adjusted while an
      absolute timer based on that clock is armed, then the
      expiration of the timer will be appropriately adjusted.
      Adjustments to the <code class="constant">CLOCK_REALTIME</code> clock have no effect on
      relative timers based on that clock.</p>

      <p>If <em class="parameter"><code>old_value</code></em> is
      not NULL, then it points to a buffer that is used to return
      the previous interval of the timer (in <em class="replaceable"><code>old_value-&gt;it_interval</code></em>)
      and the amount of time until the timer would previously have
      next expired (in <em class="replaceable"><code>old_value-&gt;it_value</code></em>).</p>

      <p><code class="function">timer_gettime</code>() returns the
      time until next expiration, and the interval, for the timer
      specified by <em class="parameter"><code>timerid</code></em>,
      in the buffer pointed to by <em class="parameter"><code>curr_value</code></em>. The time remaining
      until the next timer expiration is returned in <em class="replaceable"><code>curr_value-&gt;it_value</code></em>; this
      is always a relative value, regardless of whether the
      <code class="constant">TIMER_ABSTIME</code> flag was used
      when arming the timer. If the value returned in <em class="replaceable"><code>curr_value-&gt;it_value</code></em> is
      zero, then the timer is currently disarmed. The timer
      interval is returned in <em class="replaceable"><code>curr_value-&gt;it_interval</code></em>.
      If the value returned in <em class="replaceable"><code>curr_value-&gt;it_interval</code></em> is
      zero, then this is a "one-shot" timer.</p>
    </div>

    <div class="refsect1">
      <a id="timer-settime-2_sect2" name="timer-settime-2_sect2" shape="rect"> </a>

      <h2>RETURN VALUE</h2>

      <p>On success, <code class="function">timer_settime</code>()
      and <code class="function">timer_gettime</code>() return 0.
      On error, −1 is returned, and <code class="varname">errno</code> is set to indicate the error.</p>
    </div>

    <div class="refsect1">
      <a id="timer-settime-2_sect3" name="timer-settime-2_sect3" shape="rect"> </a>

      <h2>ERRORS</h2>

      <p>These functions may fail with the following errors:</p>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><span class="errorname">EFAULT</span></span></dt>

          <dd>
            <p><em class="parameter"><code>new_value</code></em>,
            <em class="parameter"><code>old_value</code></em>, or
            <em class="parameter"><code>curr_value</code></em> is
            not a valid pointer.</p>
          </dd>

          <dt><span class="term"><span class="errorname">EINVAL</span></span></dt>

          <dd>
            <p><em class="parameter"><code>timerid</code></em> is
            invalid.</p>
          </dd>
        </dl>
      </div>

      <p><code class="function">timer_settime</code>() may fail
      with the following errors:</p>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><span class="errorname">EINVAL</span></span></dt>

          <dd>
            <p><em class="replaceable"><code>new_value.it_value</code></em> is
            negative; or <em class="replaceable"><code>new_value.it_value.tv_nsec</code></em>
            is negative or greater than 999,999,999.</p>
          </dd>
        </dl>
      </div>
    </div>

    <div class="refsect1">
      <a id="timer-settime-2_sect4" name="timer-settime-2_sect4" shape="rect"> </a>

      <h2>VERSIONS</h2>

      <p>These system calls are available since Linux 2.6.</p>
    </div>

    <div class="refsect1">
      <a id="timer-settime-2_sect5" name="timer-settime-2_sect5" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p>POSIX.1-2001.</p>
    </div>

    <div class="refsect1">
      <a id="timer-settime-2_sect6" name="timer-settime-2_sect6" shape="rect"> </a>

      <h2>EXAMPLE</h2>

      <p>See <a class="link" href="../htmlman2/timer_create.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">timer_create</span>(2)</span></a>.</p>
    </div>

    <div class="refsect1">
      <a id="timer-settime-2_sect7" name="timer-settime-2_sect7" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman2/timer_create.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">timer_create</span>(2)</span></a>, <a class="link" href="../htmlman2/timer_getoverrun.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">timer_getoverrun</span>(2)</span></a>,
      <a class="link" href="../htmlman7/time.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">time</span>(7)</span></a></p>
    </div>

    <div class="colophon">
      <a id="timer-settime-2_sect8" name="timer-settime-2_sect8" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 3.45 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, and information about reporting
      bugs, can be found at
      http://www.kernel.org/doc/man-pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright (c) 2009 Linux Foundation, written by Michael Kerrisk<br />

                      &lt;mtk.manpages<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>gmail.com&gt;<br />

                  <br />
                  Permission is granted to make and distribute verbatim copies of this<br />

                  manual provided the copyright notice and this permission notice are<br />

                  preserved on all copies.<br />
                  <br />
                  Permission is granted to copy and distribute modified versions of this<br />

                  manual under the conditions for verbatim copying, provided that the<br />

                  entire resulting derived work is distributed under the terms of a<br />

                  permission notice identical to this one.<br />

                  <br />
                  Since the Linux kernel and libraries are constantly changing, this<br />

                  manual page may be incorrect or out-of-date.  The author(s) assume no<br />

                  responsibility for errors or omissions, or for damages resulting from<br />

                  the use of the information contained herein.  The author(s) may not<br />

                  have taken the same level of care in the production of this manual,<br />

                  which is licensed free of charge, as they might when working<br />

                  professionally.<br />
                  <br />
                  Formatted or processed versions of this manual, if unaccompanied by<br />

                  the source, must acknowledge the copyright and authors of this work.<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
