<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>strtol(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="strtol(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry" title="strtol(3) — Linux manual pages">
    <a id="strtol.3" name="strtol.3" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>strtol, strtoll, strtoq — convert a string to a long
      integer</p>
    </div>

    <div class="refsynopsisdiv" title="Synopsis">
      <h2>Synopsis</h2>

      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;stdlib.h&gt;
</pre>

        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">long int
            <strong>strtol</strong>(</code></td>

            <td rowspan="1" colspan="1">const char *<var class="pdparam">nptr</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">char **<var class="pdparam">endptr</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">base</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">long long int
            <strong>strtoll</strong>(</code></td>

            <td rowspan="1" colspan="1">const char *<var class="pdparam">nptr</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">char **<var class="pdparam">endptr</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">base</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <div class="featuretests">
                <table style="border-collapse: collapse;">
                  <colgroup span="1">
                    <col span="1" />
                  </colgroup>

                  <thead>
                    <tr>
                      <th style="" rowspan="1" colspan="1">Feature Test Macro Requirements
                      for glibc (see <a class="link" href="../htmlman7/feature_test_macros.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">feature_test_macros</span>(7)</span></a>):</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="function">strtoll</code>():</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      XOPEN_SOURCE &gt;= 600 || <code class="constant">_BSD_SOURCE</code> || <code class="constant">_SVID_SOURCE</code> ||
                      <code class="constant">_ISOC99_SOURCE</code>
                      || <code class="constant">_POSIX_C_SOURCE</code> &gt;=
                      200112L;</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">or
                      <span class="command"><strong>cc</strong></span>
                      <code class="option">-std=c99</code></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div class="refsect1" title="DESCRIPTION">
      <a id="strtol-3_sect1" name="strtol-3_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p>The <code class="function">strtol</code>() function
      converts the initial part of the string in <em class="parameter"><code>nptr</code></em> to a long integer value
      according to the given <em class="parameter"><code>base</code></em>, which must be between 2
      and 36 inclusive, or be the special value 0.</p>

      <p>The string may begin with an arbitrary amount of white
      space (as determined by <a class="link" href="../htmlman3/isalpha.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">isspace</span>(3)</span></a>) followed by a
      single optional '+' or '−' sign. If <em class="parameter"><code>base</code></em> is zero or 16, the string
      may then include a "0x" prefix, and the number will be read
      in base 16; otherwise, a zero <em class="parameter"><code>base</code></em> is taken as 10 (decimal)
      unless the next character is '0', in which case it is taken
      as 8 (octal).</p>

      <p>The remainder of the string is converted to a <span class="type">long int</span> value in the obvious manner, stopping
      at the first character which is not a valid digit in the
      given base. (In bases above 10, the letter 'A' in either
      upper or lower case represents 10, 'B' represents 11, and so
      forth, with 'Z' representing 35.)</p>

      <p>If <em class="parameter"><code>endptr</code></em> is not
      NULL, <code class="function">strtol</code>() stores the
      address of the first invalid character in *<em class="parameter"><code>endptr</code></em>. If there were no digits
      at all, <code class="function">strtol</code>() stores the
      original value of <em class="parameter"><code>nptr</code></em> in *<em class="parameter"><code>endptr</code></em> (and returns 0). In
      particular, if *<em class="parameter"><code>nptr</code></em>
      is not '\0' but **<em class="parameter"><code>endptr</code></em> is '\0' on return, the
      entire string is valid.</p>

      <p>The <code class="function">strtoll</code>() function works
      just like the <code class="function">strtol</code>() function
      but returns a long long integer value.</p>
    </div>

    <div class="refsect1" title="RETURN VALUE">
      <a id="strtol-3_sect2" name="strtol-3_sect2" shape="rect"> </a>

      <h2>RETURN VALUE</h2>

      <p>The <code class="function">strtol</code>() function
      returns the result of the conversion, unless the value would
      underflow or overflow. If an underflow occurs, <code class="function">strtol</code>() returns <code class="constant">LONG_MIN</code>. If an overflow occurs,
      <code class="function">strtol</code>() returns <code class="constant">LONG_MAX</code>. In both cases, <code class="varname">errno</code> is set to <span class="errorname">ERANGE</span>. Precisely the same holds for
      <code class="function">strtoll</code>() (with <code class="constant">LLONG_MIN</code> and <code class="constant">LLONG_MAX</code> instead of <code class="constant">LONG_MIN</code> and <code class="constant">LONG_MAX</code>).</p>
    </div>

    <div class="refsect1" title="ERRORS">
      <a id="strtol-3_sect3" name="strtol-3_sect3" shape="rect"> </a>

      <h2>ERRORS</h2>

      <div class="variablelist">
        <dl>
          <dt><span class="term"><span class="errorname">EINVAL</span></span></dt>

          <dd>
            <p>(not in C99) The given <em class="parameter"><code>base</code></em> contains an
            unsupported value.</p>
          </dd>

          <dt><span class="term"><span class="errorname">ERANGE</span></span></dt>

          <dd>
            <p>The resulting value was out of range.</p>
          </dd>
        </dl>
      </div>

      <p>The implementation may also set <code class="varname">errno</code> to <span class="errorname">EINVAL</span> in case no conversion was performed
      (no digits seen, and 0 returned).</p>
    </div>

    <div class="refsect1" title="CONFORMING TO">
      <a id="strtol-3_sect4" name="strtol-3_sect4" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p><code class="function">strtol</code>() conforms to SVr4,
      4.3BSD, C89, C99 and POSIX.1-2001, and <code class="function">strtoll</code>() to C99 and POSIX.1-2001.</p>
    </div>

    <div class="refsect1" title="NOTES">
      <a id="strtol-3_sect5" name="strtol-3_sect5" shape="rect"> </a>

      <h2>NOTES</h2>

      <p>Since <code class="function">strtol</code>() can
      legitimately return 0, <code class="constant">LONG_MAX</code>, or <code class="constant">LONG_MIN</code> (<code class="constant">LLONG_MAX</code> or <code class="constant">LLONG_MIN</code> for <code class="function">strtoll</code>()) on both success and failure, the
      calling program should set <code class="varname">errno</code>
      to 0 before the call, and then determine if an error occurred
      by checking whether <code class="varname">errno</code> has a
      nonzero value after the call.</p>

      <p>In locales other than the "C" locale, other strings may
      also be accepted. (For example, the thousands separator of
      the current locale may be supported.)</p>

      <p>BSD also has</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="informalexample">
            <pre class="programlisting" xml:space="preserve">
  <code class="function">quad_t strtoq</code>(<em class="parameter"><code>const char *nptr</code></em>, <em class="parameter"><code>char **endptr</code></em>, <em class="parameter"><code>int base</code></em>);
</pre>
          </div>
        </blockquote>
      </div>

      <p>with completely analogous definition. Depending on the
      wordsize of the current architecture, this may be equivalent
      to <code class="function">strtoll</code>() or to <code class="function">strtol</code>().</p>
    </div>

    <div class="refsect1" title="EXAMPLE">
      <a id="strtol-3_sect6" name="strtol-3_sect6" shape="rect"> </a>

      <h2>EXAMPLE</h2>

      <p>The program shown below demonstrates the use of
      <code class="function">strtol</code>(). The first
      command-line argument specifies a string from which
      <code class="function">strtol</code>() should parse a number.
      The second (optional) argument specifies the base to be used
      for the conversion. (This argument is converted to numeric
      form using <a class="link" href="../htmlman3/atoi.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">atoi</span>(3)</span></a>, a function that
      performs no error checking and has a simpler interface than
      <code class="function">strtol</code>().) Some examples of the
      results produced by this program are the following:</p>

      <div class="blockquote">
        <blockquote class="blockquote">
          <div class="informalexample">
            <pre class="programlisting" xml:space="preserve">
$<span class="emphasis"><em> ./a.out 123</em></span>
strtol() returned 123
$<span class="emphasis"><em> ./a.out '    123'</em></span>
strtol() returned 123
$<span class="emphasis"><em> ./a.out 123abc</em></span>
strtol() returned 123
Further characters after number: abc
$<span class="emphasis"><em> ./a.out 123abc 55</em></span>
strtol: Invalid argument
$<span class="emphasis"><em> ./a.out ''</em></span>
No digits were found
$<span class="emphasis"><em> ./a.out 4000000000</em></span>
strtol: Numerical result out of range
</pre>
          </div>
        </blockquote>
      </div>

      <div class="refsect2" title="Program source">
        <a id="strtol-3_sect7" name="strtol-3_sect7" shape="rect"> </a>

        <h3>Program source</h3>

        <div class="informalexample">
          <pre class="programlisting" xml:space="preserve">
#include &lt;stdlib.h&gt;
#include &lt;limits.h&gt;
#include &lt;stdio.h&gt;
#include &lt;errno.h&gt;

int
main(int argc, char *argv[])
{
    int base;
    char *endptr, *str;
    long val;

    if (argc &lt; 2) {
        fprintf(stderr, "Usage: %s str [base]\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    str = argv[1];
    base = (argc &gt; 2) ? atoi(argv[2]) : 10;

    errno = 0;    /* To distinguish success/failure after call */
    val = strtol(str, &amp;endptr, base);

    /* Check for various possible errors */

    if ((errno == ERANGE &amp;&amp; (val == LONG_MAX || val == LONG_MIN))
            || (errno != 0 &amp;&amp; val == 0)) {
        perror("strtol");
        exit(EXIT_FAILURE);
    }

    if (endptr == str) {
        fprintf(stderr, "No digits were found\n");
        exit(EXIT_FAILURE);
    }

    /* If we got here, strtol() successfully parsed a number */

    printf("strtol() returned %ld\n", val);

    if (*endptr != '\0')        /* Not necessarily an error... */
        printf("Further characters after number: %s\n", endptr);

    exit(EXIT_SUCCESS);
}
</pre>
        </div>
      </div>
    </div>

    <div class="refsect1" title="SEE ALSO">
      <a id="strtol-3_sect8" name="strtol-3_sect8" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman3/atof.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">atof</span>(3)</span></a>, <a class="link" href="../htmlman3/atoi.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">atoi</span>(3)</span></a>, <a class="link" href="../htmlman3/atoi.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">atol</span>(3)</span></a>, <a class="link" href="../htmlman3/strtod.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">strtod</span>(3)</span></a>, <a class="link" href="../htmlman3/strtoul.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">strtoul</span>(3)</span></a></p>
    </div>

    <div class="colophon" title="COLOPHON">
      <a id="strtol-3_sect9" name="strtol-3_sect9" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 3.41 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, and information about reporting
      bugs, can be found at
      http://www.kernel.org/doc/man-pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright 1993 David Metcalfe (david<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>prism.demon.co.uk)<br />

                  <br />
                  Permission is granted to make and distribute verbatim copies of this<br />

                  manual provided the copyright notice and this permission notice are<br />

                  preserved on all copies.<br />
                  <br />
                  Permission is granted to copy and distribute modified versions of this<br />

                  manual under the conditions for verbatim copying, provided that the<br />

                  entire resulting derived work is distributed under the terms of a<br />

                  permission notice identical to this one.<br />

                  <br />
                  Since the Linux kernel and libraries are constantly changing, this<br />

                  manual page may be incorrect or out-of-date.  The author(s) assume no<br />

                  responsibility for errors or omissions, or for damages resulting from<br />

                  the use of the information contained herein.  The author(s) may not<br />

                  have taken the same level of care in the production of this manual,<br />

                  which is licensed free of charge, as they might when working<br />

                  professionally.<br />
                  <br />
                  Formatted or processed versions of this manual, if unaccompanied by<br />

                  the source, must acknowledge the copyright and authors of this work.<br />

                  <br />
                  References consulted:<br />
                      Linux libc source code<br />

                      Lewine's _POSIX Programmer's Guide_ (O'Reilly &amp; Associates, 1991)<br />

                      386BSD man pages<br />

                  Modified Sun Jul 25 10:53:39 1993 by Rik Faith (faith<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cs.unc.edu)<br />

                  Added correction due to nsd<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>bbc.com (Nick Duffek) - aeb, 950610<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
