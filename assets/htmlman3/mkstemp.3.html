<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>mkstemp(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="mkstemp(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry">
    <a id="mkstemp.3" name="mkstemp.3" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>mkstemp, mkostemp, mkstemps, mkostemps — create a
      unique temporary file</p>
    </div>

    <div class="refsynopsisdiv">
      <h2>Synopsis</h2>

      <div class="funcsynopsis">
        <pre class="funcsynopsisinfo" xml:space="preserve">
#include &lt;stdlib.h&gt;
</pre>

        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>mkstemp</strong>(</code></td>

            <td rowspan="1" colspan="1">char *<var class="pdparam">template</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>mkostemp</strong>(</code></td>

            <td rowspan="1" colspan="1">char *<var class="pdparam">template</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">flags</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>mkstemps</strong>(</code></td>

            <td rowspan="1" colspan="1">char *<var class="pdparam">template</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">suffixlen</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>mkostemps</strong>(</code></td>

            <td rowspan="1" colspan="1">char *<var class="pdparam">template</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">suffixlen</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">int <var class="pdparam">flags</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
        <table border="0" summary="Note">
          <tr>
            <td rowspan="2" align="center" valign="top" width="25" colspan="1">
            <img alt="[Note]" src="../stylesheet/note.png" /></td>

            <th align="left" rowspan="1" colspan="1">Note</th>
          </tr>

          <tr>
            <td align="left" valign="top" rowspan="1" colspan="1">
              <div class="featuretests">
                <table style="border-collapse: collapse;">
                  <colgroup span="1">
                    <col span="1" />
                  </colgroup>

                  <thead>
                    <tr>
                      <th style="" rowspan="1" colspan="1">Feature Test Macro Requirements
                      for glibc (see <a class="link" href="../htmlman7/feature_test_macros.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">feature_test_macros</span>(7)</span></a>):</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="function">mkstemp</code>():</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_BSD_SOURCE</code> ||
                      <code class="constant">_SVID_SOURCE</code> ||
                      <code class="constant">_XOPEN_SOURCE</code>
                      &gt;= 500 || <code class="constant">_XOPEN_SOURCE</code> &amp;&amp;
                      <code class="constant">_XOPEN_SOURCE_EXTENDED</code></td>
                    </tr>

                    <tr>
                      <td class="featuretestver" style="" rowspan="1" colspan="1">|| /*
                      Since glibc 2.12: */</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_POSIX_C_SOURCE</code>
                      &gt;= 200112L</td>
                    </tr>

                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="function">mkostemp</code>():</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_GNU_SOURCE</code></td>
                    </tr>

                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="function">mkstemps</code>():</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_BSD_SOURCE</code> ||
                      <code class="constant">_SVID_SOURCE</code></td>
                    </tr>

                    <tr>
                      <td style="" rowspan="1" colspan="1"><code class="function">mkostemps</code>():</td>
                    </tr>

                    <tr>
                      <td class="featuretestdef" style="" rowspan="1" colspan="1">
                      <code class="constant">_GNU_SOURCE</code></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div class="refsect1">
      <a id="mkstemp-3_sect1" name="mkstemp-3_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p>The <code class="function">mkstemp</code>() function
      generates a unique temporary filename from <em class="parameter"><code>template</code></em>, creates and opens the
      file, and returns an open file descriptor for the file.</p>

      <p>The last six characters of <em class="parameter"><code>template</code></em> must be "XXXXXX" and
      these are replaced with a string that makes the filename
      unique. Since it will be modified, <em class="parameter"><code>template</code></em> must not be a string
      constant, but should be declared as a character array.</p>

      <p>The file is created with permissions 0600, that is, read
      plus write for owner only. The returned file descriptor
      provides both read and write access to the file. The file is
      opened with the <a class="link" href="../htmlman2/open.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">open</span>(2)</span></a> <code class="constant">O_EXCL</code> flag, guaranteeing that the caller
      is the process that creates the file.</p>

      <p>The <code class="function">mkostemp</code>() function is
      like <code class="function">mkstemp</code>(), with the
      difference that flags as for <a class="link" href="../htmlman2/open.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">open</span>(2)</span></a> may be specified in
      <em class="parameter"><code>flags</code></em> (e.g.,
      <code class="constant">O_APPEND</code>, <code class="constant">O_SYNC</code>).</p>

      <p>The <code class="function">mkstemps</code>() function is
      like <code class="function">mkstemp</code>(), except that the
      string in <em class="parameter"><code>template</code></em>
      contains a suffix of <em class="parameter"><code>suffixlen</code></em> characters. Thus,
      <em class="parameter"><code>template</code></em> is of the
      form <code class="function">prefixXXXXXXsuffix</code>, and
      the string XXXXXX is modified as for <code class="function">mkstemp</code>().</p>

      <p>The <code class="function">mkostemps</code>() function is
      to <code class="function">mkstemps</code>() as <code class="function">mkostemp</code>() is to <code class="function">mkstemp</code>().</p>
    </div>

    <div class="refsect1">
      <a id="mkstemp-3_sect2" name="mkstemp-3_sect2" shape="rect"> </a>

      <h2>RETURN VALUE</h2>

      <p>On success, these functions return the file descriptor of
      the temporary file. On error, −1 is returned, and
      <code class="varname">errno</code> is set appropriately.</p>
    </div>

    <div class="refsect1">
      <a id="mkstemp-3_sect3" name="mkstemp-3_sect3" shape="rect"> </a>

      <h2>ERRORS</h2>

      <div class="variablelist">
        <dl class="variablelist">
          <dt><span class="term"><span class="errorname">EEXIST</span></span></dt>

          <dd>
            <p>Could not create a unique temporary filename. Now
            the contents of <em class="parameter"><code>template</code></em> are
            undefined.</p>
          </dd>

          <dt><span class="term"><span class="errorname">EINVAL</span></span></dt>

          <dd>
            <p>For <code class="function">mkstemp</code>() and
            <code class="function">mkostemp</code>(): The last six
            characters of <em class="parameter"><code>template</code></em> were not XXXXXX;
            now <em class="parameter"><code>template</code></em> is
            unchanged.</p>

            <p>For <code class="function">mkstemps</code>() and
            <code class="function">mkostemps</code>(): <em class="parameter"><code>template</code></em> is less than
            <span class="emphasis"><em>(6 + suffixlen)</em></span>
            characters long, or the last 6 characters before the
            suffix in <em class="parameter"><code>template</code></em> were not
            XXXXXX.</p>
          </dd>
        </dl>
      </div>

      <p>These functions may also fail with any of the errors
      described for <a class="link" href="../htmlman2/open.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">open</span>(2)</span></a>.</p>
    </div>

    <div class="refsect1">
      <a id="mkstemp-3_sect4" name="mkstemp-3_sect4" shape="rect"> </a>

      <h2>VERSIONS</h2>

      <p><code class="function">mkostemp</code>() is available
      since glibc 2.7. <code class="function">mkstemps</code>() and
      <code class="function">mkostemps</code>() are available since
      glibc 2.11.</p>
    </div>

    <div class="refsect1">
      <a id="mkstemp-3_sect5" name="mkstemp-3_sect5" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p><code class="function">mkstemp</code>(): 4.3BSD,
      POSIX.1-2001.</p>

      <p><code class="function">mkstemps</code>(): unstandardized,
      but appears on several other systems.</p>

      <p><code class="function">mkostemp</code>() and <code class="function">mkostemps</code>(): are glibc extensions.</p>
    </div>

    <div class="refsect1">
      <a id="mkstemp-3_sect6" name="mkstemp-3_sect6" shape="rect"> </a>

      <h2>NOTES</h2>

      <p>In glibc versions 2.06 and earlier, the file is created
      with permissions 0666, that is, read and write for all users.
      This old behavior may be a security risk, especially since
      other UNIX flavors use 0600, and somebody might overlook this
      detail when porting programs. POSIX.1-2008 adds a requirement
      that the file be created with mode 0600.</p>

      <p>More generally, the POSIX specification of <code class="function">mkstemp</code>() does not say anything about file
      modes, so the application should make sure its file mode
      creation mask (see <a class="link" href="../htmlman2/umask.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">umask</span>(2)</span></a>) is set
      appropriately before calling <code class="function">mkstemp</code>() (and <code class="function">mkostemp</code>()).</p>

      <p>The prototype for <code class="function">mktemp</code>()
      is in <code class="literal">&lt;</code><code class="filename">unistd.h</code><code class="literal">&gt;</code>
      for libc4, libc5, glibc1; glibc2 follows POSIX.1 and has the
      prototype in <code class="literal">&lt;</code><code class="filename">stdlib.h</code><code class="literal">&gt;</code></p>
    </div>

    <div class="refsect1">
      <a id="mkstemp-3_sect7" name="mkstemp-3_sect7" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman3/mkdtemp.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">mkdtemp</span>(3)</span></a>, <a class="link" href="../htmlman3/mktemp.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">mktemp</span>(3)</span></a>, <a class="link" href="../htmlman3/tempnam.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">tempnam</span>(3)</span></a>, <a class="link" href="../htmlman3/tmpfile.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">tmpfile</span>(3)</span></a>, <a class="link" href="../htmlman3/tmpnam.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">tmpnam</span>(3)</span></a></p>
    </div>

    <div class="colophon">
      <a id="mkstemp-3_sect8" name="mkstemp-3_sect8" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 3.45 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, and information about reporting
      bugs, can be found at
      http://www.kernel.org/doc/man-pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright 1993 David Metcalfe (david<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>prism.demon.co.uk)<br />

                  and Copyright (C) 2008, Michael Kerrisk &lt;mtk.manpages<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>gmail.com&gt;<br />

                  <br />
                  Permission is granted to make and distribute verbatim copies of this<br />

                  manual provided the copyright notice and this permission notice are<br />

                  preserved on all copies.<br />
                  <br />
                  Permission is granted to copy and distribute modified versions of this<br />

                  manual under the conditions for verbatim copying, provided that the<br />

                  entire resulting derived work is distributed under the terms of a<br />

                  permission notice identical to this one.<br />

                  <br />
                  Since the Linux kernel and libraries are constantly changing, this<br />

                  manual page may be incorrect or out-of-date.  The author(s) assume no<br />

                  responsibility for errors or omissions, or for damages resulting from<br />

                  the use of the information contained herein.  The author(s) may not<br />

                  have taken the same level of care in the production of this manual,<br />

                  which is licensed free of charge, as they might when working<br />

                  professionally.<br />
                  <br />
                  Formatted or processed versions of this manual, if unaccompanied by<br />

                  the source, must acknowledge the copyright and authors of this work.<br />

                  <br />
                  References consulted:<br />
                      Linux libc source code<br />

                      Lewine's _POSIX Programmer's Guide_ (O'Reilly &amp; Associates, 1991)<br />

                      386BSD man pages<br />

                  Modified Sat Jul 24 18:48:48 1993 by Rik Faith (faith<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>cs.unc.edu)<br />

                  Modified 980310, aeb<br />
                  Modified 990328, aeb<br />
                  2008-06-19, mtk, Added mkostemp(); various other changes<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
