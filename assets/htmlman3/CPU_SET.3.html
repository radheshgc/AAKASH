<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>cpu_set(3) — Linux manual pages</title>
  <link rel="stylesheet" type="text/css" href="../stylesheet/manpages.css" />
  
  <link rel="home" href="../index.html" title="cpu_set(3) — Linux manual pages" />
  <script type="text/javascript" src="../stylesheet/manpages.js" xml:space="preserve">
</script>
  <link rel="icon" href="../stylesheet/icon.gif" type="image/gif" />
</head>

<body onload="javascript:init()">
  <div class="navheader">
    <table width="100%">
      <tbody>
        <tr>
          <td style="width: 33%" rowspan="1" colspan="1"><a href="../index.html" shape="rect">Linux
          manual pages</a></td>

          <th rowspan="1" colspan="1"><a href="../index3.html" shape="rect">Section 3</a></th>

          <td style="width: 33%" rowspan="1" colspan="1"> </td>
        </tr>
      </tbody>
    </table>
    <hr />
  </div>

  <div class="refentry" title="cpu_set(3) — Linux manual pages">
    <a id="CPU-SET.3" name="CPU-SET.3" shape="rect"> </a>

    <div class="titlepage"> </div>

    <div class="refnamediv">
      <h2>Name</h2>

      <p>CPU_SET, CPU_CLR, CPU_ISSET, CPU_ZERO, CPU_COUNT, CPU_AND,
      CPU_OR, CPU_XOR, CPU_EQUAL, CPU_ALLOC, CPU_ALLOC_SIZE,
      CPU_FREE, CPU_SET_S, CPU_CLR_S, CPU_ISSET_S, CPU_ZERO_S,
      CPU_COUNT_S, CPU_AND_S, CPU_OR_S, CPU_XOR_S, CPU_EQUAL_S
      — macros for manipulating CPU sets</p>
    </div>

    <div class="refsynopsisdiv" title="Synopsis">
      <h2>Synopsis</h2>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
#define _GNU_SOURCE              /* See feature_test_macros(7) */
#include &lt;sched.h&gt;
</pre>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_ZERO</strong>(</code></td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_SET</strong>(</code></td>

            <td rowspan="1" colspan="1">int <var class="pdparam">cpu</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_CLR</strong>(</code></td>

            <td rowspan="1" colspan="1">int <var class="pdparam">cpu</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>CPU_ISSET</strong>(</code></td>

            <td rowspan="1" colspan="1">int <var class="pdparam">cpu</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>CPU_COUNT</strong>(</code></td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_AND</strong>(</code></td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">destset</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset1</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset2</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_OR</strong>(</code></td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">destset</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset1</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset2</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_XOR</strong>(</code></td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">destset</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset1</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset2</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>CPU_EQUAL</strong>(</code></td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set1</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set2</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">cpu_set_t
            *<strong>CPU_ALLOC</strong>(</code></td>

            <td rowspan="1" colspan="1">int <var class="pdparam">num_cpus</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_FREE</strong>(</code></td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">size_t
            <strong>CPU_ALLOC_SIZE</strong>(</code></td>

            <td rowspan="1" colspan="1">int <var class="pdparam">num_cpus</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_ZERO_S</strong>(</code></td>

            <td rowspan="1" colspan="1">size_t <var class="pdparam">setsize</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_SET_S</strong>(</code></td>

            <td rowspan="1" colspan="1">int <var class="pdparam">cpu</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">size_t <var class="pdparam">setsize</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_CLR_S</strong>(</code></td>

            <td rowspan="1" colspan="1">int <var class="pdparam">cpu</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">size_t <var class="pdparam">setsize</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>CPU_ISSET_S</strong>(</code></td>

            <td rowspan="1" colspan="1">int <var class="pdparam">cpu</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">size_t <var class="pdparam">setsize</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>CPU_COUNT_S</strong>(</code></td>

            <td rowspan="1" colspan="1">size_t <var class="pdparam">setsize</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_AND_S</strong>(</code></td>

            <td rowspan="1" colspan="1">size_t <var class="pdparam">setsize</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">destset</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset1</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset2</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_OR_S</strong>(</code></td>

            <td rowspan="1" colspan="1">size_t <var class="pdparam">setsize</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">destset</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset1</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset2</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">void
            <strong>CPU_XOR_S</strong>(</code></td>

            <td rowspan="1" colspan="1">size_t <var class="pdparam">setsize</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">destset</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset1</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">srcset2</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>

      <div class="funcsynopsis">
        <table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table">
          <tr>
            <td rowspan="1" colspan="1"><code class="funcdef">int
            <strong>CPU_EQUAL_S</strong>(</code></td>

            <td rowspan="1" colspan="1">size_t <var class="pdparam">setsize</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set1</var>,</td>
          </tr>

          <tr>
            <td rowspan="1" colspan="1"> </td>

            <td rowspan="1" colspan="1">cpu_set_t *<var class="pdparam">set2</var><code>)</code>;</td>
          </tr>
        </table>

        <div class="funcprototype-spacer">
           
        </div>
      </div>
    </div>

    <div class="refsect1" title="DESCRIPTION">
      <a id="CPU-SET-3_sect1" name="CPU-SET-3_sect1" shape="rect"> </a>

      <h2>DESCRIPTION</h2>

      <p>The <span class="type">cpu_set_t</span> data structure
      represents a set of CPUs. CPU sets are used by <a class="link" href="../htmlman2/sched_setaffinity.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sched_setaffinity</span>(2)</span></a> and
      similar interfaces.</p>

      <p>The <span class="type">cpu_set_t</span> data type is
      implemented as a bitset. However, the data structure treated
      as considered opaque: all manipulation of CPU sets should be
      done via the macros described in this page.</p>

      <p>The following macros are provided to operate on the CPU
      set <em class="parameter"><code>set</code></em>:</p>

      <div class="variablelist">
        <dl>
          <dt><span class="term"><code class="function">CPU_ZERO</code>()</span></dt>

          <dd>
            <p>Clears <em class="parameter"><code>set</code></em>,
            so that it contains no CPUs.</p>
          </dd>

          <dt><span class="term"><code class="function">CPU_SET</code>()</span></dt>

          <dd>
            <p>Add CPU <em class="parameter"><code>cpu</code></em>
            to <em class="parameter"><code>set</code></em>.</p>
          </dd>

          <dt><span class="term"><code class="function">CPU_CLR</code>()</span></dt>

          <dd>
            <p>Remove CPU <em class="parameter"><code>cpu</code></em> from <em class="parameter"><code>set</code></em>.</p>
          </dd>

          <dt><span class="term"><code class="function">CPU_ISSET</code>()</span></dt>

          <dd>
            <p>Test to see if CPU <em class="parameter"><code>cpu</code></em> is a member of
            <em class="parameter"><code>set</code></em>.</p>
          </dd>

          <dt><span class="term"><code class="function">CPU_COUNT</code>()</span></dt>

          <dd>
            <p>Return the number of CPUs in <em class="parameter"><code>set</code></em>.</p>
          </dd>
        </dl>
      </div>

      <p>Where a <em class="parameter"><code>cpu</code></em>
      argument is specified, it should not produce side effects,
      since the above macros may evaluate the argument more than
      once.</p>

      <p>The first available CPU on the system corresponds to a
      <em class="parameter"><code>cpu</code></em> value of 0, the
      next CPU corresponds to a <em class="parameter"><code>cpu</code></em> value of 1, and so on. The
      constant <code class="constant">CPU_SETSIZE</code> (currently
      1024) specifies a value one greater than the maximum CPU
      number that can be stored in <span class="type">cpu_set_t</span>.</p>

      <p>The following macros perform logical operations on CPU
      sets:</p>

      <div class="variablelist">
        <dl>
          <dt><span class="term"><code class="function">CPU_AND</code>()</span></dt>

          <dd>
            <p>Store the intersection of the sets <em class="parameter"><code>srcset1</code></em> and <em class="parameter"><code>srcset2</code></em> in <em class="parameter"><code>destset</code></em> (which may be one
            of the source sets).</p>
          </dd>

          <dt><span class="term"><code class="function">CPU_OR</code>()</span></dt>

          <dd>
            <p>Store the union of the sets <em class="parameter"><code>srcset1</code></em> and <em class="parameter"><code>srcset2</code></em> in <em class="parameter"><code>destset</code></em> (which may be one
            of the source sets).</p>
          </dd>

          <dt><span class="term"><code class="function">CPU_XOR</code>()</span></dt>

          <dd>
            <p>Store the XOR of the sets <em class="parameter"><code>srcset1</code></em> and <em class="parameter"><code>srcset2</code></em> in <em class="parameter"><code>destset</code></em> (which may be one
            of the source sets). The XOR means the set of CPUs that
            are in either <em class="parameter"><code>srcset1</code></em> or <em class="parameter"><code>srcset2</code></em>, but not
            both.</p>
          </dd>

          <dt><span class="term"><code class="function">CPU_EQUAL</code>()</span></dt>

          <dd>
            <p>Test whether two CPU set contain exactly the same
            CPUs.</p>
          </dd>
        </dl>
      </div>

      <div class="refsect2" title="Dynamically sized CPU sets">
        <a id="CPU-SET-3_sect2" name="CPU-SET-3_sect2" shape="rect"> </a>

        <h3>Dynamically sized CPU sets</h3>

        <p>Because some applications may require the ability to
        dynamically size CPU sets (e.g., to allocate sets larger
        than that defined by the standard <span class="type">cpu_set_t</span> data type), glibc nowadays provides
        a set of macros to support this.</p>

        <p>The following macros are used to allocate and deallocate
        CPU sets:</p>

        <div class="variablelist">
          <dl>
            <dt><span class="term"><code class="function">CPU_ALLOC</code>()</span></dt>

            <dd>
              <p>Allocate a CPU set large enough to hold CPUs in
              the range 0 to <em class="replaceable"><code>num_cpus-1</code></em>.</p>
            </dd>

            <dt><span class="term"><code class="function">CPU_ALLOC_SIZE</code>()</span></dt>

            <dd>
              <p>Return the size in bytes of the CPU set that would
              be needed to hold CPUs in the range 0 to <em class="replaceable"><code>num_cpus-1</code></em>. This
              macro provides the value that can be used for the
              <em class="parameter"><code>setsize</code></em>
              argument in the <code class="function">CPU_*_S</code>() macros described
              below.</p>
            </dd>

            <dt><span class="term"><code class="function">CPU_FREE</code>()</span></dt>

            <dd>
              <p>Free a CPU set previously allocated by
              <code class="function">CPU_ALLOC</code>().</p>
            </dd>
          </dl>
        </div>

        <p>The macros whose names end with "_S" are the analogs of
        the similarly named macros without the suffix. These macros
        perform the same tasks as their analogs, but operate on the
        dynamically allocated CPU set(s) whose size is <em class="parameter"><code>setsize</code></em> bytes.</p>
      </div>
    </div>

    <div class="refsect1" title="RETURN VALUE">
      <a id="CPU-SET-3_sect3" name="CPU-SET-3_sect3" shape="rect"> </a>

      <h2>RETURN VALUE</h2>

      <p><code class="function">CPU_ISSET</code>() and <code class="function">CPU_ISSET_S</code>() return nonzero if <em class="parameter"><code>cpu</code></em> is in <em class="parameter"><code>set</code></em>; otherwise, it returns
      0.</p>

      <p><code class="function">CPU_COUNT</code>() and <code class="function">CPU_COUNT_S</code>() return the number of CPUs in
      <em class="parameter"><code>set</code></em>.</p>

      <p><code class="function">CPU_EQUAL</code>() and <code class="function">CPU_EQUAL_S</code>() return nonzero if the two CPU
      sets are equal; otherwise it returns 0.</p>

      <p><code class="function">CPU_ALLOC</code>() returns a
      pointer on success, or NULL on failure. (Errors are as for
      <a class="link" href="../htmlman3/malloc.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">malloc</span>(3)</span></a>.)</p>

      <p><code class="function">CPU_ALLOC_SIZE</code>() returns the
      number of bytes required to store a CPU set of the specified
      cardinality.</p>

      <p>The other functions do not return a value.</p>
    </div>

    <div class="refsect1" title="VERSIONS">
      <a id="CPU-SET-3_sect4" name="CPU-SET-3_sect4" shape="rect"> </a>

      <h2>VERSIONS</h2>

      <p>The <code class="function">CPU_ZERO</code>(), <code class="function">CPU_SET</code>(), <code class="function">CPU_CLR</code>(), and <code class="function">CPU_ISSET</code>() macros were added in glibc
      2.3.3.</p>

      <p><code class="function">CPU_COUNT</code>() first appeared
      in glibc 2.6.</p>

      <p><code class="function">CPU_AND</code>(), <code class="function">CPU_OR</code>(), <code class="function">CPU_XOR</code>(), <code class="function">CPU_EQUAL</code>(), <code class="function">CPU_ALLOC</code>(), <code class="function">CPU_ALLOC_SIZE</code>(), <code class="function">CPU_FREE</code>(), <code class="function">CPU_ZERO_S</code>(), <code class="function">CPU_SET_S</code>(), <code class="function">CPU_CLR_S</code>(), <code class="function">CPU_ISSET_S</code>(), <code class="function">CPU_AND_S</code>(), <code class="function">CPU_OR_S</code>(), <code class="function">CPU_XOR_S</code>(), and <code class="function">CPU_EQUAL_S</code>() first appeared in glibc
      2.7.</p>
    </div>

    <div class="refsect1" title="CONFORMING TO">
      <a id="CPU-SET-3_sect5" name="CPU-SET-3_sect5" shape="rect"> </a>

      <h2>CONFORMING TO</h2>

      <p>These interfaces are Linux-specific.</p>
    </div>

    <div class="refsect1" title="NOTES">
      <a id="CPU-SET-3_sect6" name="CPU-SET-3_sect6" shape="rect"> </a>

      <h2>NOTES</h2>

      <p>To duplicate a CPU set, use <a class="link" href="../htmlman3/memcpy.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">memcpy</span>(3)</span></a>.</p>

      <p>Since CPU sets are bitsets allocated in units of long
      words, the actual number of CPUs in a dynamically allocated
      CPU set will be rounded up to the next multiple of
      <span class="emphasis"><em>sizeof(unsigned long)</em></span>.
      An application should consider the contents of these extra
      bits to be undefined.</p>

      <p>Notwithstanding the similarity in the names, note that the
      constant <code class="constant">CPU_SETSIZE</code> indicates
      the number of CPUs in the <span class="type">cpu_set_t</span>
      data type (thus, it is effectively a count of bits in the
      bitset), while the <em class="parameter"><code>setsize</code></em> argument of the
      <code class="function">CPU_*_S</code>() macros is a size in
      bytes.</p>

      <p>The data types for arguments and return values shown in
      the SYNOPSIS are hints what about is expected in each case.
      However, since these interfaces are implemented as macros,
      the compiler won't necessarily catch all type errors if you
      violate the suggestions.</p>
    </div>

    <div class="refsect1" title="BUGS">
      <a id="CPU-SET-3_sect7" name="CPU-SET-3_sect7" shape="rect"> </a>

      <h2>BUGS</h2>

      <p>On 32-bit platforms with glibc 2.8 and earlier,
      <code class="function">CPU_ALLOC</code>() allocates twice as
      much space as is required, and <code class="function">CPU_ALLOC_SIZE</code>() returns a value twice as
      large as it should. This bug should not affect the semantics
      of a program, but does result in wasted memory and less
      efficient operation of the macros that operate on dynamically
      allocated CPU sets. These bugs are fixed in glibc 2.9.</p>
    </div>

    <div class="refsect1" title="EXAMPLE">
      <a id="CPU-SET-3_sect8" name="CPU-SET-3_sect8" shape="rect"> </a>

      <h2>EXAMPLE</h2>

      <p>The following program demonstrates the use of some of the
      macros used for dynamically allocated CPU sets.</p>

      <div class="informalexample">
        <pre class="programlisting" xml:space="preserve">
#define _GNU_SOURCE
#include &lt;sched.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;
#include &lt;assert.h&gt;

int
main(int argc, char *argv[])
{
    cpu_set_t *cpusetp;
    size_t size;
    int num_cpus, cpu;

    if (argc &lt; 2) {
        fprintf(stderr, "Usage: %s &lt;num−cpus&gt;\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    num_cpus = atoi(argv[1]);

    cpusetp = CPU_ALLOC(num_cpus);
    if (cpusetp == NULL) {
        perror("CPU_ALLOC");
        exit(EXIT_FAILURE);
    }

    size = CPU_ALLOC_SIZE(num_cpus);

    CPU_ZERO_S(size, cpusetp);
    for (cpu = 0; cpu &lt; num_cpus; cpu += 2)
        CPU_SET_S(cpu, size, cpusetp);

    printf("CPU_COUNT() of set:    %d\n", CPU_COUNT_S(size, cpusetp));

    CPU_FREE(cpusetp);
    exit(EXIT_SUCCESS);
}
</pre>
      </div>
    </div>

    <div class="refsect1" title="SEE ALSO">
      <a id="CPU-SET-3_sect9" name="CPU-SET-3_sect9" shape="rect"> </a>

      <h2>SEE ALSO</h2>

      <p><a class="link" href="../htmlman2/sched_setaffinity.2.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">sched_setaffinity</span>(2)</span></a>,
      <a class="link" href="../htmlman3/pthread_attr_setaffinity_np.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">pthread_attr_setaffinity_np</span>(3)</span></a>,
      <a class="link" href="../htmlman3/pthread_setaffinity_np.3.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">pthread_setaffinity_np</span>(3)</span></a>,
      <a class="link" href="../htmlman7/cpuset.7.html" target="_top" shape="rect"><span class="citerefentry"><span class="refentrytitle">cpuset</span>(7)</span></a></p>
    </div>

    <div class="colophon" title="COLOPHON">
      <a id="CPU-SET-3_sect10" name="CPU-SET-3_sect10" shape="rect"> </a>

      <h2>COLOPHON</h2>

      <p>This page is part of release 3.41 of the Linux <em class="replaceable"><code>man-pages</code></em> project. A
      description of the project, and information about reporting
      bugs, can be found at
      http://www.kernel.org/doc/man-pages/.</p>

      <div class="license">
        <table style="border-collapse: collapse;">
          <colgroup span="1">
            <col span="1" />
          </colgroup>

          <tbody>
            <tr>
              <td style="" rowspan="1" colspan="1">
                <div class="literallayout">
                  <br />
                    Copyright (C) 2006 Michael Kerrisk<br />

                  and Copyright (C) 2008 Linux Foundation, written by Michael Kerrisk<br />

                      &lt;mtk.manpages<script type="text/javascript">document.write('@');</script><noscript>(@)</noscript>gmail.com&gt;<br />

                  <br />
                  Permission is granted to make and distribute verbatim copies of this<br />

                  manual provided the copyright notice and this permission notice are<br />

                  preserved on all copies.<br />
                  <br />
                  Permission is granted to copy and distribute modified versions of this<br />

                  manual under the conditions for verbatim copying, provided that the<br />

                  entire resulting derived work is distributed under the terms of a<br />

                  permission notice identical to this one.<br />

                  <br />
                  Since the Linux kernel and libraries are constantly changing, this<br />

                  manual page may be incorrect or out-of-date.  The author(s) assume no<br />

                  responsibility for errors or omissions, or for damages resulting from<br />

                  the use of the information contained herein.  The author(s) may not<br />

                  have taken the same level of care in the production of this manual,<br />

                  which is licensed free of charge, as they might when working<br />

                  professionally.<br />
                  <br />
                  Formatted or processed versions of this manual, if unaccompanied by<br />

                  the source, must acknowledge the copyright and authors of this work.<br />
                  
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
